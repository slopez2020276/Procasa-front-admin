<app-admin-navbar></app-admin-navbar>

<div id="container-2">
    <h1>Plazas</h1>

    <div id="bar-search">
      <input class="bold" type="text" name="search" placeholder="" title="buscar producto">
    </div>
    <button class="btn-click btn-red normal" (click)="ModalProduct('add')"><mat-icon>add</mat-icon> Agregar Plaza</button>
  </div>


<div id="container-main">

<div id="container">


  @for (os of dataUnete; track os._id  ) {

    <div class="cont">
      <img [src]="os.imgPath" alt="">

      <h2 class="bold">{{os.titulo}}</h2>
      <div class="datos">

      <ul class="ul-data">
          <li class="bold">Ubicación: <span>{{os.ubicacion}}</span></li>
          <li class="bold">Departamento: <span>{{os.departamento}}</span></li>
          <li class="bold">Empresa: <span>{{os.empresa}}</span></li>
          <li class="bold">Fecha de publicación: <span>{{os.fecha}}</span></li>
          <li class="bold">Funciones Principales:
              <ul>
                @for (ositems of os.funciones; track $index) {
                  <li  (click)="obtenerItemd($index)" >  {{ositems}}</li>
                }
              </ul>
          </li>
          <li class="bold">Educación: <span>{{os.educacion}}</span></li>
          <li class="bold">Experiencia laboral: <span>{{os.experecia}}</span></li>
      </ul>

      <div class="cont-buttons">
        <div class="actions btn-click btn-red" (click)="ModalFunctions($index)"><mat-icon>add</mat-icon></div>
          <div class="actions btn-click btn-red" (click)="ModalProduct('edit')" (click)="obtenerPlazaId(os._id)"  ><mat-icon>edit</mat-icon></div>
          <div class="actions btn-click btn-red" (click)="EliminarP(os._id)"><mat-icon>delete</mat-icon></div>
      </div>


<div class="fns-add">
  <div class="close-minmodal" (click)="ModalFunctions($index)"><mat-icon>close</mat-icon></div>
<form [formGroup]="formAgregarFuncion">

  <div class="cont-in-fns">
    <textarea formControlName="funcion" name="" class="normal" id="fn-to-add" placeholder="función nueva"></textarea>

    <div id="save-fns" (click)="ModalFunctions($index)" (click)="agregarfuncion(os._id)" ><mat-icon>save</mat-icon> guardar</div>
  </div>

</form>
</div>
      </div> <!-- DATOS -->


      </div>
    }





<form [formGroup]="formAgregarPlaza" >

  <div class="modal" id="add">
    <div class="btn-click close-modal" (click)="ModalProduct('add')"><mat-icon>close</mat-icon></div>
    <h1 class="title-modal">Agregar plaza</h1>
    <div class="sub-cont">


<div id="sub-cont-details-img">
        <div class="sub-details">
            <div class="sub-img-btn">
              <input type="file" (change)="InputChange($event)" (change)="getFile($event)" title="seleccionar archivo" accept=".jpg, .png, .jpeg, .avi, .webp" data-content="seleccionar archivo">
              <mat-icon>delete</mat-icon>
            </div>
          <ul>
            <li>ancho: <span class="bold danger-red"></span> </li>
            <li>alto:  <span class="bold danger-red"></span> </li>
            <li>peso:  <span class="bold danger-red"></span></li>
          </ul>
        </div>
        <div class="cont-details-img"><img alt="" src=""></div>
  </div>


</div>
<div class="sub-cont">
  <div class="sub">
    <input type="text"  formControlName="titulo" class="normal" placeholder="Nombre plaza/vacante">
    <input type="text" formControlName="departamento" class="normal" placeholder="Departamento">
    <input type="text" formControlName="empresa" class="normal" placeholder="Empresa">
  </div>


  <div class="sub">
    <input type="text" formControlName="ubicacion" class="normal" placeholder="Ubicacion">
    <input type="text" formControlName="educacion" class="normal" placeholder="Educación requerida">
    <input type="text" formControlName="formulario" class="normal" placeholder="Enlace del Formulario">

    <textarea name="" id=""  formControlName="experiencia"  class="normal" placeholder="Experiencia laboral"></textarea>
  </div>
</div>

<div class="cont-btns">
  <div class="btn-click btn-red" (click)="sendFileplaza()"><mat-icon>save</mat-icon> guardar</div>
</div>

</div>
</form>

<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------ -->

<div class="modal" id="edit">
  <div class="btn-click close-modal" (click)="ModalProduct('edit')"><mat-icon>close</mat-icon></div>
  <h1 class="title-modal">Editar plaza</h1>

<div class="sub-cont">


  <div class="sub-cont">
  </div>



  <form [formGroup]="formEditarPlaza">
  <div class="sub-cont">

<div id="sub-cont-details-img">
      <div class="sub-details">
          <div class="sub-img-btn">
            <input type="file" (change)="getFileEdit($event)"  (change)="InputChange($event)" title="seleccionar archivo" accept=".jpg, .png, .jpeg, .avi, .webp" data-content="seleccionar archivo">
            <mat-icon>delete</mat-icon>
          </div>
        <ul>
          <li>ancho: <span class="bold danger-red" id="innerwidth-add"></span> </li>
          <li>alto:  <span class="bold danger-red" id="innerheight-add"></span> </li>
          <li>peso:  <span class="bold danger-red" id="innersize-add"></span></li>
        </ul>
      </div>
      <div class="cont-details-img"><img alt="" src=""></div>
</div>


    <div class="sub">
        <input type="text" [(ngModel)]="NombrePlaza" formControlName="titulo"  placeholder="Nombre plaza/vacante">
        <input type="text" [(ngModel)]="DepartamentoPlaza"  formControlName="departamento"  placeholder="Departamento">
        <input type="text"  [(ngModel)]="EmpresaPlaza"   formControlName="empresa" placeholder="Empresa">
      </div>

      <div class="sub">
        <div id="open-modal-edit-fn" class="btn-click" (click)="ModalEditFunctions()" (click)="obtenerFunciones()" >editar funciones</div>

        <input type="text"  [(ngModel)]="UbicacionPlaza" formControlName="ubicacion"  placeholder="Ubicacion">

        <input type="text"  [(ngModel)]="EducacionPlaza" formControlName="educacion" placeholder="Educación requerida">
        <textarea name="" id=""  [(ngModel)]="ExperienciaPlaza" formControlName="experiencia"  placeholder="Experiencia laboral"></textarea>

      </div>
    </div>
  </form>


<div class="cont-btns">
    <div class="btn-click btn-red" (click)="Edit()" (click)="EditPlaza()" ><mat-icon>save</mat-icon> guardar</div>
  </div>
</div>
<!--  -->


<div id="modal-edit-fns">
  <h1 class="close-modal title-modal">Editar funciones</h1>
  <div class="btn-click close-modal" (click)="ModalEditFunctions()"><mat-icon>close</mat-icon></div>

<div id="cont-input-edit">
  @for (ositems of funciones; track $index) {
  <div class="actions-input-del">
    <div class="btn-click btn-red" (click)="DeleteFunction()" (click)="eliminarFuncion($index)"><mat-icon>delete</mat-icon></div>
    <div class="btn-click btn-red" (click)="editarFuncion($index)"><mat-icon>edit</mat-icon></div>
    <form [formGroup]="formEditarFuncion">
      <input  formControlName="funciones" (click)="obtenerIndiceFunciones($index)"  type="text" placeholder="{{ositems}}">
    </form>
    </div>
  }

  <div id="save-edit-fn" class="btn-click" (click)="ModalEditFunctions()"><mat-icon>save</mat-icon> guardar</div>
</div>
</div>


<div class="container-alert" forelem="-editar-">
  <div class="alert-model">
      <p class="inner-message bold"></p>

      <div class="message"> <h1 class="innermsg"></h1></div>
      <div class="cont-btns-alert">
        <button class="confirm" (click)="editarPlaza()" (click)="closeAlert($event)"><mat-icon>done</mat-icon></button>
        <div class="replace-button cancel" (click)="closeAlert($event)"><mat-icon>close</mat-icon></div>
      </div>
    </div>
</div>

</div>



<!-------- A L E R T ---------------------------------------------------------------------------------------------------------------------------------------------------->
<div id="background-alert">
  <div class="container-alert" id="container-alert">
    <div class="alert-model">
      <p class="message bold"></p>
      <div class="cont-btns-alert" id="btns">
        <div class="btn-click btn-red" id="confirm-alert"><mat-icon>done</mat-icon> confirmar</div>
        <div class="btn-click btn-gray" (click)="AlertClose()"><mat-icon>close</mat-icon> cancelar</div>
      </div>
    </div>
  </div>
</div>
<!-- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->
